# События `tirtle`

Модуль `turtle` в Python предоставляет возможность создавать не только графику, но и интерактивные приложения, реагирующие на различные события. 

**События** — это действия, такие как щелчки мыши или нажатия клавиш, которые могут вызывать выполнение определённых функций. 

В `turtle` можно обрабатывать несколько типов событий: щелчки мыши, перемещения мыши и нажатия клавиш.

В этой статье мы рассмотрим основные события в `turtle`, а также приведём примеры их использования.

## Обработка событий мыши

События мыши позволяют отслеживать щелчки и действия мыши в окне `turtle`. 

Они могут использоваться, например, для перемещения черепахи в указанное место или для изменения её состояния по щелчку.

#### Пример 1.1: Щелчок мыши — перемещение черепахи в точку

Метод `onscreenclick()` позволяет отслеживать щелчки мыши и реагировать на них. В этом примере черепаха перемещается в ту точку, на которую пользователь щёлкнул мышью.

![t01](https://github.com/Codynodycom/library-py-easy/blob/main/python-theory/17-graphic/images/t01.png)

```python
import turtle

# Создаём экран и черепаху
screen = turtle.Screen()
t = turtle.Turtle()

# Функция, вызываемая при щелчке мыши
def move_to_click(x, y):
    t.goto(x, y)  # Перемещаем черепаху в координаты (x, y)

# Связываем функцию move_to_click с щелчком мыши
screen.onscreenclick(move_to_click)

turtle.done()
```

#### Пример 1.2: Щелчок правой кнопкой мыши — изменение цвета черепахи

Мы можем различать левую и правую кнопку мыши. Для этого в `onscreenclick()` можно указать кнопку, на которую будет реагировать черепаха.

![t2](https://github.com/Codynodycom/library-py-easy/blob/main/python-theory/17-graphic/images/t2.png)

```python
import turtle

# Создаём экран и черепаху
screen = turtle.Screen()
t = turtle.Turtle()

# Функция для изменения цвета при щелчке правой кнопкой мыши
def change_color(x, y):
    t.color("red")  # Изменяем цвет черепахи на красный

# Связываем правую кнопку мыши с функцией change_color
screen.onscreenclick(change_color, btn=3)

turtle.done()
```

## Обработка событий клавиатуры

**События** клавиатуры позволяют отслеживать нажатия и отпускания клавиш и реагировать на них, что полезно, например, для создания простых игр или управления черепахой с клавиатуры.

#### Пример 2.1: Управление черепахой с клавиатуры
Метод `onkey()` позволяет связывать нажатия клавиш с определёнными функциями. В этом примере мы создадим простое управление черепахой: клавиши стрелок будут заставлять её двигаться в разных направлениях.

В этом примере черепаха будет перемещаться вверх, вниз, влево и вправо при нажатии на соответствующие клавиши.

![t3](https://github.com/Codynodycom/library-py-easy/blob/main/python-theory/17-graphic/images/t3.png)

```python
import turtle

# Создаём экран и черепаху
screen = turtle.Screen()
t = turtle.Turtle()

# Функции для движения черепахи
def move_up():
    t.setheading(90)  # Поворачиваем черепаху на север
    t.forward(20)

def move_down():
    t.setheading(270)  # Поворачиваем черепаху на юг
    t.forward(20)

def move_left():
    t.setheading(180)  # Поворачиваем черепаху на запад
    t.forward(20)

def move_right():
    t.setheading(0)  # Поворачиваем черепаху на восток
    t.forward(20)

# Привязываем клавиши к функциям
screen.listen()  # Включаем прослушивание событий
screen.onkey(move_up, "Up")
screen.onkey(move_down, "Down")
screen.onkey(move_left, "Left")
screen.onkey(move_right, "Right")

turtle.done()
```
#### Пример 2.2: Изменение цвета черепахи по нажатию клавиш

С помощью событий клавиатуры можно не только двигать черепаху, но и выполнять другие действия. Например, изменение цвета черепахи при нажатии определённых клавиш.

Теперь при нажатии клавиши `r` черепаха станет красной, а при нажатии `b` — синей.

![t4](https://github.com/Codynodycom/library-py-easy/blob/main/python-theory/17-graphic/images/t4.png)

```python
import turtle

# Создаём экран и черепаху
screen = turtle.Screen()
t = turtle.Turtle()

# Функции для изменения цвета
def set_color_red():
    t.color("red")

def set_color_blue():
    t.color("blue")

# Привязываем клавиши к функциям
screen.listen()
screen.onkey(set_color_red, "r")   # Нажатие "r" меняет цвет на красный
screen.onkey(set_color_blue, "b")  # Нажатие "b" меняет цвет на синий

turtle.done()
```

## Перемещение мыши

Событие перемещения мыши позволяет отслеживать движение курсора по экрану и привязывать к нему действия.

Метод `onmousemove()` позволяет реагировать на движение мыши. В этом примере черепаха будет следовать за курсором.

```python
import turtle

# Создаём экран и черепаху
screen = turtle.Screen()
t = turtle.Turtle()

# Функция для перемещения черепахи к координатам курсора
def follow_mouse(x, y):
    t.goto(x, y)

# Привязываем перемещение мыши к функции follow_mouse
screen.onscreenclick(follow_mouse)

turtle.done()
```

## События таймера

Таймер позволяет выполнять определённое действие с задержкой или через определённые интервалы времени. Это полезно для создания циклических действий, таких как анимация.

#### Пример 4.1: Простая анимация с использованием таймера

Мы можем использовать `ontimer()` для создания анимации, где черепаха будет двигаться по экрану через определённые интервалы.

В этом примере черепаха будет двигаться вперёд и поворачиваться каждые 200 миллисекунд, создавая эффект вращения.

![t5](https://github.com/Codynodycom/library-py-easy/blob/main/python-theory/17-graphic/images/t5.png)

```python
import turtle

# Создаём экран и черепаху
screen = turtle.Screen()
t = turtle.Turtle()
t.speed(1)

# Функция для перемещения черепахи
def move():
    t.forward(10)  # Движение вперёд на 10 пикселей
    t.right(25)    # Поворот направо на 25 градусов
    screen.ontimer(move, 200)  # Повторение функции каждые 200 мс

# Запускаем анимацию
move()

turtle.done()
```

## Событие завершения программы

Модуль `turtle` позволяет завершить программу, когда пользователь закрывает окно или вызывает событие выхода.

Теперь при нажатии клавиши `q` окно программы закроется.

```python
import turtle

# Создаём экран и черепаху
screen = turtle.Screen()
t = turtle.Turtle()

# Функция для завершения программы
def quit_program():
    screen.bye()  # Закрывает окно и завершает программу

# Привязываем клавишу "q" к функции выхода
screen.listen()
screen.onkey(quit_program, "q")

turtle.done()
```

## Заключение

Модуль `turtle` в Python позволяет создавать интерактивные программы с поддержкой событий. В этой статье мы рассмотрели основные типы событий:

**События мыши**: позволяют реагировать на щелчки и перемещения курсора.

**События клавиатуры**: позволяют связывать функции с нажатиями клавиш.

**События таймера**: позволяют выполнять действия через определённые интервалы времени.

С этими знаниями вы можете создавать интерактивные программы, управляемые с помощью мыши и клавиатуры, а также добавлять простые анимации.
