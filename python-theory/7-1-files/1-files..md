# Работа с файлами

Для работы с файлами в Python используется функция `open()`. Она открывает файл и возвращает объект файла, с которым можно выполнять различные операции, такие как чтение, запись или добавление данных.

```python
file = open('example.txt', 'r')  # Открытие файла для чтения
file.close()  # Закрытие файла после работы
```

**Режимы открытия файла:**

- `'r'` — открыть файл для чтения (по умолчанию).
- `'w'` — открыть для записи (содержимое файла будет перезаписано).
- `'a'` — открыть для добавления (новые данные будут добавляться в конец файла).
- `'b'` — бинарный режим (например, 'rb' — чтение в бинарном режиме).
- `'x'` — создать файл, если его ещё не существует.

### Безопасное открытие файла с помощью `with`

Python рекомендует использовать конструкцию `with`, которая автоматически закрывает файл после завершения работы с ним, даже если возникла ошибка.

```python
with open('example.txt', 'r') as file:
    content = file.read()  # Чтение содержимого файла
# Файл автоматически закрыт
```

### Чтение данных из файла

Существует несколько способов чтения данных из файла.

`read()`

Читает весь файл целиком.

```python
with open('example.txt', 'r') as file:
    content = file.read()
    print(content)
```

`readline()`

Читает одну строку за раз.

```python
with open('example.txt', 'r') as file:
    line = file.readline()
    while line:
        print(line.strip())  # Удаление лишних пробелов
        line = file.readline()
```

`readlines()`

Читает все строки файла и возвращает их в виде списка.

```python
with open('example.txt', 'r') as file:
    lines = file.readlines()
    print(lines)
```

### Запись данных в файл

Для записи данных используется режим `'w'` или `'a'`. В режиме `'w'` содержимое файла перезаписывается, а в режиме `'a'` — добавляется к существующему содержимому.

**Запись в файл**

```python
with open('example.txt', 'w') as file:
    file.write('Hello, Python!\n')
    file.write('This is a new line.\n')
```

**Добавление в файл**

```python
with open('example.txt', 'a') as file:
    file.write('This line will be appended.\n')
```

### Работа с бинарными файлами

Бинарные файлы, такие как изображения, аудиофайлы или видео, обрабатываются в специальном режиме `'b'`.

**Чтение бинарного файла**

```python
with open('image.jpg', 'rb') as file:
    content = file.read()
```

**Запись в бинарный файл**

```python
with open('output_image.jpg', 'wb') as file:
    file.write(content)
```

### Копирование содержимого одного файла в другой

Вот пример программы, которая читает содержимое одного файла и записывает его в другой файл.

```python
with open('source.txt', 'r') as source_file:
    content = source_file.read()

with open('destination.txt', 'w') as dest_file:
    dest_file.write(content)
```

### Полезные методы при работе с файлами

- `tell()` — возвращает текущее положение указателя в файле.

- `seek(offset, whence)` — перемещает указатель в файле на нужную позицию.

    - `offset` — количество байтов для смещения.

    - `whence` — точка отсчета (0 — начало, 1 — текущая позиция, 2 — конец файла).

```python
with open('example.txt', 'r') as file:
    print(file.tell())  # Текущая позиция: 0 (начало файла)
    file.read(5)
    print(file.tell())  # Текущая позиция: 5 (после чтения 5 символов)
    file.seek(0)  # Вернуть указатель в начало файла
    print(file.read())  # Чтение всего содержимого заново
```
